<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creating Blog Page</title>
    <link rel="stylesheet" href="/assets/css/index.css" />
    <link rel="stylesheet" href="/assets/css/nav.css" />
    <link rel="stylesheet" href="/assets/css/blog.css" />
  </head>

  <body>
    <nav>
      <ul>
        <li>
          <img src="/assets/img/logo.png" style="height: 30px" />
        </li>
        <li>
          <a href="/" class="nav-link"> Home </a>
        </li>
        <li>
          <a href="/blog" class="nav-link"> Blog </a>
        </li>
        <li style="display: flex; justify-content: flex-end; width: 80%">
          <a href="/contact" class="btn-orange nav-link">Contact Me</a>
          <button onclick="hamburgerToggle()" class="hamburger-button"><i
              class="fa-solid fa-bars"
            ></i></button>
        </li>
      </ul>
    </nav>

    <div id="hamburger-container" class="hamburger-container hide">
      <h1 class="hamburger-container-item">
        <a style="color: black" href="/"> Home </a>
      </h1>
      <h1 class="hamburger-container-item hamburger-active">
        <a style="color: white" href="/blog"> Blog </a>
      </h1>
      <h1 class="hamburger-container-item">
        <a style="color: black" href="/contact"> Contact Me </a>
      </h1>
    </div>

    <div class="blog">

      {{#if user}}

      <div class="blog-form">
        <div class="form-container">
          <form method="post" action="/blog" enctype="multipart/form-data">
            <h1>Create Post Blog</h1>
            <div>
              <label for="input-blog-title">Title</label>
              <input id="input-blog-title" name="title" />
            </div>
            <div>
              <label for="input-blog-content">Content</label>
              <textarea id="input-blog-content" name="content"></textarea>
            </div>
            <div>
              <label>Upload Image</label>
              <div class="input-blog-image-group">
                <label for="input-blog-image">
                  <p>Attach File</p>
                  <img src="/assets/icon/file.png" alt="file" />
                </label>
                <input type="file" id="input-blog-image" name="image" hidden />
              </div>
            </div>
            <div class="button-group">
              <button type="submit">Post Blog</button>
            </div>
          </form>
        </div>
      </div>

      <hr class="line" />

      {{/if}}


      <div id="contents" class="blog-list">
        {{#each blogs}}
          <div class="blog-list-item">
            <div class="blog-image">
              <img src="{{image}}" alt="" />
            </div>
            <div class="blog-content">
              {{#if ../user}}
              <div
                class="btn-group"
                style="display: flex; justify-content: flex-end"
              >
                <a href="/edit-blog/{{id}}" class="btn-edit">Edit Post</a>
                <form method="post" action="/delete-blog/{{id}}">
                  <button type="submit" class="btn-post">Delete Post</button>
                </form>
              </div>
              {{/if}}
              <h1>
                <a href="/blog-detail/{{id}}" target="_blank">{{title}}</a>
              </h1>
              <div class="detail-blog-content">
                {{get_full_time createdAt}}
                |
                {{#if author}}
                  {{author}}
                {{else}}
                  Unknown User
                {{/if}}
              </div>
              <p>
                {{content}}
              </p>
              <p>
                {{get_distance_time createdAt}}
              </p>
            </div>
          </div>
        {{/each}}
      </div>
    </div>

    <script src="/assets/js/nav.js"></script>
  </body>
</html>